# Distributed Personal Data Server (PDS)

Ğ”ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ EventLog, CRDT, GraphQL Ğ¸ HTTP-MQTT Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.

## ğŸ“‹ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ±Ğ¾Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ² Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ¹ ÑÑ€ĞµĞ´Ğµ. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:

- **ğŸ” Ğ”ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ** - Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° DID (Decentralized Identifiers)
- **ğŸ“ EventLog Ñ CRDT** - append-only Ğ»Ğ¾Ğ³ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸ĞµĞ¼ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
- **ğŸ—„ï¸ ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ğ¸ ÑÑ…ĞµĞ¼Ñ‹** - Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹
- **ğŸ” GraphQL API** - Ğ³Ğ¸Ğ±ĞºĞ¸Ğ¹ API Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
- **ğŸ”„ MQTT ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑƒĞ·Ğ»Ğ°Ğ¼Ğ¸
- **ğŸš‡ HTTP-MQTT Ñ‚ÑƒĞ½Ğ½ĞµĞ»ÑŒ** - Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ HTTP Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· MQTT (ĞºĞ°Ğº ngrok)
- **ğŸ” Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸** - ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **ğŸ“Š Ğ˜Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** - Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ² (exact, prefix, range, fulltext)

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PDS Server                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   GraphQL    â”‚    â”‚  Collection  â”‚    â”‚   EventLog   â”‚     â”‚
â”‚  â”‚   Handler    â”‚â”€â”€â”€â–¶â”‚    Engine    â”‚â”€â”€â”€â–¶â”‚    (CRDT)    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                             â”‚                    â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Schema     â”‚    â”‚   Identity   â”‚    â”‚  KeyManager  â”‚     â”‚
â”‚  â”‚   Registry   â”‚    â”‚   Manager    â”‚    â”‚ (Encryption) â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                             â”‚                    â”‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚          BadgerDB Storage Layer                      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ MQTT Sync      â”‚
                      â”‚ (Optional)     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### EventLog (Ğ”ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹)

EventLog - ÑÑ‚Ğ¾ append-only Ğ»Ğ¾Ğ³ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ CRDT (Conflict-free Replicated Data Type):

- **TID (Timestamp ID)** - ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ, Ğ²ĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ğ¹ timestamp Ğ¸ clockID
- **DAG ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°** - ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ² Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ³Ñ€Ğ°Ñ„
- **ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞ¸** - ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¼ ĞºĞ»ÑÑ‡Ğ¾Ğ¼ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ°
- **Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²** - LastWriteWins, DIDPriority Ğ¸Ğ»Ğ¸ custom
- **Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· MQTT

```go
Event {
    EventTID:     "2zef5s3dvr2dm"           // Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ TID
    AuthorDID:    "did:key:z6MkpTH..."     // DID Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ°
    Collection:   "posts"                   // ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ
    EventType:    "create"                  // Ğ¢Ğ¸Ğ¿ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
    Parents:      ["2zef5s3dvr2dk"]        // Ğ Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ (DAG)
    Payload:      {...}                     // Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
    Signature:    [...]                     // ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
}
```

### HTTP-MQTT Tunnel (Relay)

Ğ¢ÑƒĞ½Ğ½ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ HTTP Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     HTTP      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     MQTT      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HTTP Client â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Relay Server â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ MQTT Broker   â”‚
â”‚   (curl)    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ (Reverse     â”‚               â”‚  (comqtt)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  Proxy)      â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â–²
                                                                    â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     MQTT            â”‚
                              â”‚Tunnel Client â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚(Forward to   â”‚
                              â”‚ localhost)   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚ HTTP
                              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Local HTTP   â”‚
                              â”‚   Server     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Go 1.25.3 Ğ¸Ğ»Ğ¸ Ğ²Ñ‹ÑˆĞµ
- Make (Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾Ğ¹ ÑĞ±Ğ¾Ñ€ĞºĞ¸)

### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

```bash
# ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
git clone https://github.com/gloudx/mqtt.git
cd mqtt

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
go mod download
```

### Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°

```bash
# Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
make build

# Ğ˜Ğ»Ğ¸ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:
make build-pds           # PDS ÑĞµÑ€Ğ²ĞµÑ€
make build-server        # HTTP-MQTT relay ÑĞµÑ€Ğ²ĞµÑ€
make build-client        # HTTP-MQTT Ñ‚ÑƒĞ½Ğ½ĞµĞ»ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚
make build-eventlog-tool # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ EventLog
```

ĞŸĞ¾ÑĞ»Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ `bin/`:
- `bin/pds` - PDS ÑĞµÑ€Ğ²ĞµÑ€
- `bin/server` - Relay ÑĞµÑ€Ğ²ĞµÑ€ (MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€ + HTTP reverse proxy)
- `bin/client` - Tunnel ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- `bin/eventlog-tool` - CLI ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° Ğ´Ğ»Ñ EventLog

## ğŸ“š Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### 1. Ğ—Ğ°Ğ¿ÑƒÑĞº PDS ÑĞµÑ€Ğ²ĞµÑ€Ğ°

#### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº

```bash
./bin/pds
```

Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· make:
```bash
make run-pds
```

#### Ğ¡ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸

```bash
./bin/pds \
  --node-id=node1 \
  --data=./data/pds \
  --http-port=8080
```

#### Ğ¡ MQTT ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹

```bash
./bin/pds \
  --data=./data/pds \
  --http-port=8080 \
  --mqtt-broker=tcp://localhost:1883 \
  --mqtt-enable
```

Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· make:
```bash
make run-pds-mqtt
```

#### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹

- `--config` - Ğ¿ÑƒÑ‚ÑŒ Ğº JSON Ñ„Ğ°Ğ¹Ğ»Ñƒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
- `--node-id` - ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID ÑƒĞ·Ğ»Ğ°
- `--data` - Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: `./data/pds`)
- `--http-port` - Ğ¿Ğ¾Ñ€Ñ‚ HTTP ÑĞµÑ€Ğ²ĞµÑ€Ğ° (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: `8080`)
- `--mqtt-broker` - URL MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `tcp://localhost:1883`)
- `--mqtt-enable` - Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ MQTT ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- `--debug-export-eventlog` - ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ eventlog Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: `true`)

### 2. Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ GraphQL API

ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° PDS ÑĞµÑ€Ğ²ĞµÑ€Ğ° GraphQL API Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ: `http://localhost:8080/graphql`

#### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:**

```graphql
mutation {
  createPost(input: {
    title: "Hello World"
    content: "My first post"
    published: true
  }) {
    id
    title
    content
    createdAt
  }
}
```

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:**

```graphql
query {
  posts(limit: 10) {
    id
    title
    content
    createdAt
  }
}
```

**Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹:**

```graphql
query {
  posts(where: { published: true }, limit: 5) {
    id
    title
  }
}
```

### 3. HTTP-MQTT Tunnel

#### Ğ—Ğ°Ğ¿ÑƒÑĞº relay ÑĞµÑ€Ğ²ĞµÑ€Ğ°

```bash
./bin/server
# Ğ¸Ğ»Ğ¸
make run-server
```

Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚:
- MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ `1883`
- HTTP reverse proxy Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ `8081`

#### Ğ—Ğ°Ğ¿ÑƒÑĞº tunnel ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°

```bash
./bin/client -client-id=my-app -target=http://localhost:3000
```

ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:
- `-client-id` - ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ID ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- `-target` - URL Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ HTTP ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- `-broker` - URL MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€Ğ° (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: `tcp://localhost:1883`)

#### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ñ

```bash
# Ğ’Ğ°Ñˆ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ·:
curl http://localhost:8081/my-app/api/hello

# POST Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
curl -X POST http://localhost:8081/my-app/api/data \
  -H "Content-Type: application/json" \
  -d '{"key": "value"}'
```
## ğŸ”§ Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

### Identity (internal/identity)

Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´ĞµÑ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸ (DID):

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°
manager, err := identity.NewIdentityManager(privKey, pubKey)
did := manager.GetDID()
// did:key:z6MkpTHR8VNsBxYAAWHut2Geadd9jSwuBV8xRoAnwWsdvktH

// ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
keyPair := manager.GetKeyPair()
signature, err := keyPair.Sign(data)

// Ğ’ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
valid, err := keyPair.Verify(data, signature)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ DID (Ğ¼ĞµÑ‚Ğ¾Ğ´ `did:key`)
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸ (Ed25519)
- ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ Ğ¸ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- ĞŸĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ/Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°)
- Ğ ĞµĞ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ DID Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

**Ğ¡Ğ¼. Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ:** [internal/identity/README.md](internal/identity/README.md)

### EventLog (internal/eventlog)

Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ CRDT:

```go
config := eventlog.EventLogConfig{
    OwnerDID:           ownerDID,
    KeyPair:            keyPair,
    ClockID:            0,
    Storage:            storage,
    Synchronizer:       mqttSync,
    ConflictResolution: eventlog.LastWriteWins,
}
eventLog, err := eventlog.NewEventLog(config)

// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
event, err := eventLog.Append(ctx, "posts", "create", payload, nil)

// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
events, err := eventLog.GetAllEvents(ctx)

// Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² JSON
err = eventLog.ExportToFile(ctx, "eventlog.json")
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Append-only Ğ»Ğ¾Ğ³ Ñ DAG ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹
- ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ (Ed25519)
- TID (Timestamp ID) Ğ´Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑƒĞ¿Ğ¾Ñ€ÑĞ´Ğ¾Ñ‡ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
- Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ² (LWW, DID Priority, Custom)
- MQTT ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑƒĞ·Ğ»Ğ°Ğ¼Ğ¸
- Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚/Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ² JSON/NDJSON
- Garbage collection ÑƒÑÑ‚Ğ°Ñ€ĞµĞ²ÑˆĞ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²:**
- `LastWriteWins` - Ğ¿Ğ¾Ğ±ĞµĞ¶Ğ´Ğ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ñ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ğ¾Ğ·Ğ´Ğ½Ğ¸Ğ¼ timestamp
- `DIDPriority` - Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¿Ğ¾ Ğ»ĞµĞºÑĞ¸ĞºĞ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¼Ñƒ Ğ¿Ğ¾Ñ€ÑĞ´ĞºÑƒ DID
- `Custom` - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ

**Ğ¡Ğ¼. Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ:** [tmp/eventlog/README.md](tmp/eventlog/README.md)

### Collection (internal/collection)

Ğ¢Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸
collection := collection.NewCollection(db, ownerDID, keyPair, schemaDef)

// Ğ’ÑÑ‚Ğ°Ğ²ĞºĞ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
doc := collection.Document{
    "title":   "Hello",
    "content": "World",
}
event, err := collection.Insert(ctx, doc)

// Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
query := collection.Query{
    Filter: map[string]interface{}{"published": true},
    Limit:  10,
}
result, err := collection.Find(ctx, query)

// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
changes := collection.Document{"status": "published"}
event, err := collection.Update(ctx, docID, changes)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ ÑÑ…ĞµĞ¼Ğµ
- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ (exact, prefix, range, fulltext)
- CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· EventLog
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
- Ğ¡Ğ²ÑĞ·ÑŒ Ñ EventLog Ğ´Ğ»Ñ Ñ€ĞµĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

**Ğ¡Ğ¼. Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ:** [internal/collection/README.md](internal/collection/README.md)

### Schema (internal/schema)

ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```go
type SchemaDefinition struct {
    Name     string
    Version  int
    Fields   []FieldDef
    Indexes  []IndexDef
}

type FieldDef struct {
    Name     string
    Type     FieldType  // String, Int, Float, Boolean, ID, DateTime, JSON
    Nullable bool
    IsList   bool
    CRDTType string     // ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ CRDT Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
}
```

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹:**
- ĞŸÑ€Ğ¸Ğ¼Ğ¸Ñ‚Ğ¸Ğ²Ñ‹: String, Int, Float, Boolean, ID
- Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ: DateTime, JSON
- Ğ¡Ğ¿Ğ¸ÑĞºĞ¸: `IsList: true`
- Nullable Ğ¿Ğ¾Ğ»Ñ

**Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²:**
- `exact` - Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğµ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğµ
- `prefix` - Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
- `range` - Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
- `fulltext` - Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº

### GraphQL (internal/graphql)

GraphQL API Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸ÑĞ¼Ğ¸:

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ resolver
resolver := graphql.NewResolver(engine)

// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ handler
handler := graphql.NewHandler(resolver)

// ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° HTTP ÑĞµÑ€Ğ²ĞµÑ€Ğ°
http.Handle("/graphql", handler)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹ Ğ¸Ğ· ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¹
- Query Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ, Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ)
- Mutation Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ, Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ, ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ)
- ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

### KeyManager (internal/keymanager)

Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°
keyManager := keymanager.NewKeyManager()

// Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡Ğ°
keyInfo, err := keyManager.GenerateKey("my-key")

// Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
encrypted, err := keyManager.Encrypt("my-key", data)

// Ğ Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ°
decrypted, err := keyManager.Decrypt("my-key", encrypted)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ¼Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡Ğ½Ñ‹Ñ… ĞºĞ»ÑÑ‡ĞµĞ¹ (AES-256-GCM)
- Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ/Ñ€Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹
- ĞŸĞµÑ€ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ»ÑÑ‡ĞµĞ¹
- ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### TID (internal/tid)

Timestamp ID - Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾ ÑƒĞ¿Ğ¾Ñ€ÑĞ´Ğ¾Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹:

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ TID
tid := tid.NewTIDNow(0)  // "2zef5s3dvr2dm"

// Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ timestamp
timestamp := tid.Time()

// Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ clockID
clockID := tid.ClockID()

// ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³
parsedTID, err := tid.ParseTID("2zef5s3dvr2dm")
```

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° TID:**
- 13 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² base32 (ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚)
- Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ timestamp (Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµĞºÑƒĞ½Ğ´Ñ‹)
- ClockID (0-1023) Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
- Ğ›ĞµĞºÑĞ¸ĞºĞ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ

### Tunnel (internal/tunnel)

HTTP-MQTT Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:

```go
// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ reverse proxy
proxy, err := tunnel.NewHTTPReverseProxy(brokerURL, clientID)

// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ tunnel ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
client, err := tunnel.NewTunnelClient(brokerURL, clientID, targetURL)
```

**Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ¢ÑƒĞ½Ğ½ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ HTTP Ñ‡ĞµÑ€ĞµĞ· MQTT
- Request/Response correlation
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ²ÑĞµÑ… HTTP Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ²
- ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¾Ğ² Ğ¸ Ñ‚ĞµĞ»Ğ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
- Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ñ‹ Ğ¸ retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
mqtt/
â”œâ”€â”€ cmd/                          # Ğ¢Ğ¾Ñ‡ĞºĞ¸ Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹
â”‚   â”œâ”€â”€ pds/                      # PDS ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â””â”€â”€ relay/                    # HTTP-MQTT relay ÑĞµÑ€Ğ²ĞµÑ€
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/                     # Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹
â”‚   â”œâ”€â”€ collection/               # ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ collection.go         # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¹
â”‚   â”‚   â”œâ”€â”€ engine.go             # Ğ”Ğ²Ğ¸Ğ¶Ğ¾Ğº ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¹
â”‚   â”‚   â”œâ”€â”€ index_*.go            # Ğ Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ storage.go            # Ğ¡Ğ»Ğ¾Ğ¹ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ event/                    # Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ event.go              # Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Event
â”‚   â”‚   â””â”€â”€ signer.go             # ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
â”‚   â”œâ”€â”€ eventlog/                 # Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ EventLog
â”‚   â”‚   â”œâ”€â”€ eventlog.go           # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ storage.go            # BadgerDB storage
â”‚   â”‚   â””â”€â”€ synchronizer.go       # MQTT ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ graphql/                  # GraphQL API
â”‚   â”‚   â”œâ”€â”€ handler.go            # HTTP handler
â”‚   â”‚   â”œâ”€â”€ resolver.go           # Query/Mutation resolver
â”‚   â”‚   â”œâ”€â”€ schema_builder.go     # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹
â”‚   â”‚   â””â”€â”€ filter_builder.go     # ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
â”‚   â”œâ”€â”€ identity/                 # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ DID
â”‚   â”‚   â”œâ”€â”€ identity.go           # DID ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ keypair.go            # ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºĞ»ÑÑ‡Ğ¸
â”‚   â”‚   â”œâ”€â”€ manager.go            # Identity manager
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ keymanager/               # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ keymgr.go             # ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ĞºĞ»ÑÑ‡ĞµĞ¹
â”‚   â”‚   â””â”€â”€ encryption.go         # Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ/Ñ€Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²ĞºĞ°
â”‚   â”œâ”€â”€ pds/                      # PDS ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â”‚   â”œâ”€â”€ server.go             # HTTP ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â”‚   â””â”€â”€ config.go             # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ permissions/              # ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
â”‚   â”‚   â””â”€â”€ policy.go             # ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”‚   â”œâ”€â”€ schema/                   # Ğ¡Ñ…ĞµĞ¼Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â”œâ”€â”€ parser.go             # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ÑÑ…ĞµĞ¼
â”‚   â”‚   â”œâ”€â”€ registry.go           # Ğ ĞµĞµÑÑ‚Ñ€ ÑÑ…ĞµĞ¼
â”‚   â”‚   â””â”€â”€ types.go              # Ğ¢Ğ¸Ğ¿Ñ‹ ÑÑ…ĞµĞ¼
â”‚   â”œâ”€â”€ tid/                      # Timestamp ID
â”‚   â”‚   â””â”€â”€ tid.go                # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ TID
â”‚   â””â”€â”€ tunnel/                   # HTTP-MQTT Ñ‚ÑƒĞ½Ğ½ĞµĞ»ÑŒ
â”‚       â””â”€â”€ tunnel.go             # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€
â”œâ”€â”€ go.mod                        # Go Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile                      # ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑĞ±Ğ¾Ñ€ĞºĞ¸
â”œâ”€â”€ README.md                     # Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
â””â”€â”€ QUICKSTART.md                 # Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
```

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ

- **Ed25519** - Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸ DID
- **AES-256-GCM** - Ğ´Ğ»Ñ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **SHA-256** - Ğ´Ğ»Ñ Ñ…ÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Merkle DAG

### ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

```go
type AccessControl struct {
    Visibility Visibility  // public, private, shared
    SharedWith []string    // DIDs Ğ´Ğ»Ñ shared
}
```

- `public` - Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ Ğ²ÑĞµĞ¼
- `private` - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ²Ñ‚Ğ¾Ñ€
- `shared` - ÑĞ²Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ½Ñ‹Ğµ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸

### ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¼ ĞºĞ»ÑÑ‡Ğ¾Ğ¼ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ°:

```go
event := Event{
    EventTID:   tid,
    AuthorDID:  "did:key:z6Mk...",
    Payload:    data,
    ...
}
signature, _ := signer.Sign(event)
event.Signature = signature
```

## ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²
go test ./...

# Ğ¢ĞµÑÑ‚Ñ‹ Ñ coverage
go test -cover ./...

# Verbose Ğ²Ñ‹Ğ²Ğ¾Ğ´
go test -v ./internal/eventlog
```

## ğŸ”¨ Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

### Makefile ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
make build              # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
make build-pds          # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ PDS
make build-server       # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ relay ÑĞµÑ€Ğ²ĞµÑ€
make build-client       # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ tunnel ĞºĞ»Ğ¸ĞµĞ½Ñ‚

make run-pds            # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ PDS
make run-pds-mqtt       # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ PDS Ñ MQTT
make run-server         # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ relay ÑĞµÑ€Ğ²ĞµÑ€

make clean              # ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ bin/
make fmt                # Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ´
make vet                # ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´
make test               # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹
```

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸

1. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚Ğµ ÑÑ…ĞµĞ¼Ñƒ Ğ² GraphQL SDL Ğ¸Ğ»Ğ¸ Go:

```go
schema := &schema.SchemaDefinition{
    Name:    "posts",
    Version: 1,
    Fields: []schema.FieldDef{
        {Name: "title", Type: schema.TypeString, Nullable: false},
        {Name: "content", Type: schema.TypeString, Nullable: false},
        {Name: "published", Type: schema.TypeBoolean, Nullable: false},
    },
    Indexes: []schema.IndexDef{
        {Field: "title", Type: schema.IndexFullText},
    },
}
```

2. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑÑ…ĞµĞ¼Ñƒ:

```go
registry.RegisterSchema(schema)
```

3. GraphQL API Ğ±ÑƒĞ´ĞµÑ‚ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸!

## ğŸ“Š ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ

### BadgerDB Storage

- **ĞšĞ¾Ğ¼Ğ¿Ñ€ĞµÑÑĞ¸Ñ:** Snappy (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- **Max table size:** 4MB (Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾)
- **GC interval:** 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾)
- **Batch operations:** Ğ”Ğ¾ 100 ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

### MQTT Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

- **QoS:** 1 (at least once delivery)
- **Keep-alive:** 60 ÑĞµĞºÑƒĞ½Ğ´
- **Auto-reconnect:** Ğ”Ğ°
- **Ğ‘Ğ°Ñ‚Ñ‡Ğ¸Ğ½Ğ³:** ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¾Ğ±ÑŠĞµĞ¼Ğ¾Ğ²

## ğŸš§ Roadmap

- [ ] WebSocket Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ñ real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
- [ ] libp2p Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ P2P ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- [ ] IPFS/IPLD Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ
- [ ] Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²
- [ ] ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… CRDT Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
- [ ] ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ ÑÑ…ĞµĞ¼
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ GraphQL (subscriptions)
- [ ] Metrics Ğ¸ monitoring
- [ ] Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸

## ğŸ“– Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- [QUICKSTART.md](QUICKSTART.md) - Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚
- [internal/identity/README.md](internal/identity/README.md) - Identity ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
- [internal/collection/README.md](internal/collection/README.md) - ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸
- [tmp/eventlog/README.md](tmp/eventlog/README.md) - EventLog Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
- [internal/collection/CHANGELOG.md](internal/collection/CHANGELOG.md) - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹

## ğŸ¤ Ğ’ĞºĞ»Ğ°Ğ´

ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ÑÑ pull requests Ğ¸ issues!

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT License

## ğŸ”— Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:
- **github.com/wind-c/comqtt/v2** - MQTT Ğ±Ñ€Ğ¾ĞºĞµÑ€
- **github.com/dgraph-io/badger/v4** - Key-Value Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ
- **github.com/eclipse/paho.mqtt.golang** - MQTT ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- **github.com/graphql-go/graphql** - GraphQL ÑĞµÑ€Ğ²ĞµÑ€
- **github.com/ethereum/go-ethereum** - ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ (Ed25519)
- **github.com/libp2p/go-libp2p** - P2P ÑĞµÑ‚ÑŒ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
- **github.com/ipfs/boxo** - IPFS Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº ÑĞ¼. Ğ² [go.mod](go.mod)

---

**ĞĞ²Ñ‚Ğ¾Ñ€:** gloudx  
**Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:** https://github.com/gloudx/mqtt  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0.0 (Ğ² Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ)
